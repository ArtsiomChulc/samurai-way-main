{"version":3,"file":"static/js/959.c9b9da66.chunk.js","mappings":"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","sources":["component/Profile/profile.module.css","webpack://samurai-way/./src/component/Profile/Post/post.module.css?ad3f","component/Profile/Post/Post.tsx","webpack://samurai-way/./src/component/Profile/MyPost/mypost.module.css?b436","component/Profile/MyPost/MyPost.tsx","component/Profile/MyPost/MyPostContainer.tsx","component/Profile/Profile.tsx","component/Profile/ProfileContainer.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {};","// extracted by mini-css-extract-plugin\nexport default {\"post\":\"post_post__tfeAO\",\"message_text\":\"post_message_text__dR8Js\",\"like\":\"post_like__6LTKi\",\"likeCount\":\"post_likeCount__22JGR\"};","import React from \"react\";\nimport s from \"./post.module.css\";\nimport EditableSpanPost from \"../../common/editableSpan/EditableSpanPost\";\n\ntype PostType = {\n  message: string;\n  likeCount: number;\n  onChangeMessage: (newMessage: string) => void;\n};\nexport const Post = (props: PostType) => {\n  const onChangeMessage = (newMessage: string) => {\n    props.onChangeMessage(newMessage);\n  };\n\n  return (\n    <div className={s.post}>\n      <img\n        src=\"https://png.pngtree.com/png-vector/20190710/ourmid/pngtree-user-vector-avatar-png-image_1541962.jpg\"\n        alt=\"\"\n      />\n      {/*<span className={s.message_text}>{props.message}</span>*/}\n      <span className={s.message_text}>\n        <EditableSpanPost message={props.message} onChangeMessageCB={onChangeMessage} />\n      </span>\n\n      <span className={s.like}>\n        <img src=\"https://www.svgrepo.com/show/220662/like.svg\" alt=\"\" />\n        <span className={s.likeCount}>{props.likeCount}</span>\n      </span>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"myPost\":\"mypost_myPost__AsuSx\",\"wrapAddMessage\":\"mypost_wrapAddMessage__N2-QO\",\"btn\":\"mypost_btn__uNtyx\",\"errorText\":\"mypost_errorText__d-pvA\",\"error\":\"mypost_error__cx8Ih\"};","import React from \"react\";\nimport { Post } from \"../Post/Post\";\nimport s from \"./mypost.module.css\";\nimport btn from \"../../common/styles/btn.module.css\";\nimport { UsersPropsType } from \"./MyPostContainer\";\nimport { useFormik } from \"formik\";\n\nconst MyPost = React.memo((props: UsersPropsType) => {\n    const postElement = [...props.posts.posts].reverse().map((el) => {\n        // делаем имутабельно (не меняем наш state, делаем копию)\n        const onChangeMessage = (newMessage: string) => {\n            props.onChangeMessageCB(newMessage, el.id);\n        };\n        return <Post key={el.id} message={el.post} likeCount={el.likeCount} onChangeMessage={onChangeMessage} />;\n    });\n\n    return (\n        <div className={s.myPost}>\n            <div>\n                <MyPostForm addPost={props.addPostCB} />\n                {/*{error && <span className={s.errorText}>{error}</span>}*/}\n            </div>\n\n            {postElement}\n        </div>\n    );\n});\n\nexport default MyPost;\n\nexport type MyPostType = {\n    newPostFormik?: string;\n    addPost: (el: string) => void;\n};\n\nexport type FormikErrorType = {\n    newPostFormik?: string;\n};\n\nconst MyPostForm = (props: MyPostType) => {\n    const formik = useFormik({\n        initialValues: {\n            newPostFormik: \"\",\n        },\n        onSubmit: (values) => {\n            props.addPost(values.newPostFormik);\n            formik.resetForm();\n        },\n        validate: (values) => {\n            const errors: FormikErrorType = {};\n            if (values.newPostFormik.length === 0) {\n                errors.newPostFormik = \"Введите пост\";\n            } else if (values.newPostFormik.length < 3) {\n                errors.newPostFormik = \"Ну еще чуть-чуть добавь букв)))\";\n            }\n            return errors;\n        },\n    });\n    return (\n        <form onSubmit={formik.handleSubmit} className={s.wrapAddMessage}>\n            <textarea {...formik.getFieldProps(\"newPostFormik\")} />\n            {formik.errors.newPostFormik && <div className={s.error}>{formik.errors.newPostFormik}</div>}\n            <div>\n                <button type={\"submit\"} className={btn.btn}>\n                    Add post\n                </button>\n            </div>\n        </form>\n    );\n};\n","import React from \"react\";\nimport { AddPostAC, ChangeMessageAC, ProfilePageType } from \"Redux/profile-reducer\";\nimport MyPost from \"./MyPost\";\nimport { connect } from \"react-redux\";\nimport { Dispatch } from \"redux\";\nimport { AppRootStateType } from \"Redux/redux-store\";\n\ntype MapStatePropsType = {\n    posts: ProfilePageType;\n};\ntype MapDispatchPropsType = {\n    addPostCB: (el: string) => void;\n    // onChangeHandlerCB: (text: string) => void\n    onChangeMessageCB: (newMessage: string, id: number) => void;\n};\n\nexport type UsersPropsType = MapStatePropsType & MapDispatchPropsType;\n\nlet mapStateToProps = (state: AppRootStateType): MapStatePropsType => {\n    return {\n        posts: state.profilePage,\n    };\n};\n\nlet mapDispatchToProps = (dispatch: Dispatch): MapDispatchPropsType => {\n    return {\n        addPostCB: (el: string) => {\n            dispatch(AddPostAC(el));\n        },\n\n        // onChangeHandlerCB: (text: string) => {\n        //     dispatch(UpdateNewPostAC(text))\n        // },\n        onChangeMessageCB: (newMessage: string, id: number) => {\n            dispatch(ChangeMessageAC(newMessage, id));\n        },\n    };\n};\n\nconst MyPostContainer = connect(mapStateToProps, mapDispatchToProps)(MyPost);\n\nexport default MyPostContainer;\n","import React, { lazy, Suspense, useState } from \"react\";\nimport s from \"./profile.module.css\";\n// import { ProfileInfo } from \"./ProfileInfo/ProfileInfo\";\nimport MyPostContainer from \"./MyPost/MyPostContainer\";\nimport { ProfileType } from \"Redux/profile-reducer\";\nimport Preloader from \"component/common/preloader/Preloader\";\nimport { FormikValues } from \"formik\";\nimport { FormikResType } from \"component/Profile/ProfileInfo/ProfileDataForm\";\n\nconst ProfileInfo = lazy(() => import(\"./ProfileInfo/ProfileInfo\"));\n\ntype ProfileInfoPropsType = {\n    profile: ProfileType | null;\n    status: string;\n    updateStatus: (status: string) => void;\n    isAuth: boolean;\n    isOwner: boolean;\n    savePhoto: (file: File) => void;\n    saveProfile: (x: FormikResType) => void;\n};\n\nexport const Profile = (props: ProfileInfoPropsType) => {\n    // REDIRECT\n    // if(!props.isAuth) return <Redirect to={'login'}/>\n\n    return (\n        <div className={s.profile}>\n            <Suspense fallback={<Preloader />}>\n                <ProfileInfo\n                    isOwner={props.isOwner}\n                    status={props.status}\n                    updateStatus={props.updateStatus}\n                    profile={props.profile}\n                    savePhoto={props.savePhoto}\n                    saveProfile={props.saveProfile}\n                />\n            </Suspense>\n            <MyPostContainer />\n        </div>\n    );\n};\n","import React from \"react\";\nimport { Profile } from \"./Profile\";\nimport {\n    getStatusProfileThunkCreator,\n    getUsersProfileThunkCreator,\n    ProfileType,\n    savePhotoTC,\n    saveProfileTC,\n    updateStatusProfileThunkCreator,\n} from \"Redux/profile-reducer\";\nimport { connect } from \"react-redux\";\nimport { AppRootStateType } from \"Redux/redux-store\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { compose } from \"redux\";\nimport { getAuthId, getIsAuthSelector, getProfileReselect, getStatus } from \"Redux/selectors/selectors\";\nimport { FormikResType } from \"component/Profile/ProfileInfo/ProfileDataForm\";\n\nclass ProfileContainer extends React.Component<PropsType> {\n    refreshProfile() {\n        let userId = this.props.match.params.userId;\n        if (!userId) {\n            userId = this.props.authorizedUserId;\n            if (!userId) {\n                this.props.history.push(\"/login\");\n            }\n        }\n\n        this.props.getUsersProfile(userId);\n        this.props.getStatusProfile(userId);\n    }\n\n    componentDidMount() {\n        this.refreshProfile();\n    }\n\n    componentDidUpdate(prevProps: Readonly<PropsType>, prevState: Readonly<{}>, snapshot?: any) {\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\n            this.refreshProfile();\n        }\n    }\n\n    render() {\n        return (\n            <Profile\n                {...this.props}\n                profile={this.props.profile}\n                status={this.props.status}\n                updateStatus={this.props.updateStatusProfile}\n                isAuth={this.props.isAuth}\n                isOwner={!this.props.match.params.userId}\n            />\n        );\n    }\n}\n\ntype MatchParamsType = {\n    userId: string;\n};\n\ntype PropsType = RouteComponentProps<MatchParamsType> & ProfileInfoPropsType;\n\ntype MapDispatchPropsType = {\n    getUsersProfile: (id: string) => void;\n    getStatusProfile: (id: string) => void;\n    updateStatusProfile: (status: string) => void;\n    savePhoto: (file: File) => void;\n    saveProfile: (x: FormikResType) => void;\n};\n\ntype MapStatePropsType = {\n    profile: ProfileType | null;\n    status: string;\n    isAuth: boolean;\n    authorizedUserId: string;\n};\n\nexport type ProfileInfoPropsType = MapStatePropsType & MapDispatchPropsType;\n\nconst mapStateToProps = (state: AppRootStateType) => {\n    return {\n        profile: getProfileReselect(state),\n        status: getStatus(state),\n        isAuth: getIsAuthSelector(state),\n        authorizedUserId: getAuthId(state),\n    };\n};\n\nexport default compose<React.ComponentType>(\n    connect(mapStateToProps, {\n        getUsersProfile: getUsersProfileThunkCreator,\n        getStatusProfile: getStatusProfileThunkCreator,\n        updateStatusProfile: updateStatusProfileThunkCreator,\n        savePhoto: savePhotoTC,\n        saveProfile: saveProfileTC,\n    }),\n    // withAuthRedirect,\n    withRouter,\n)(ProfileContainer);\n\n// const ProfileContainerWithRouter = withRouter(ProfileContainer)\n//\n// let WithReDirect = withAuthRedirect(ProfileContainerWithRouter)\n//\n// export default connect(mapStateToProps, {getUsersProfile: getUsersProfileThunkCreator})(WithReDirect)\n"],"names":["Post","props","className","s","src","alt","EditableSpanPost","message","onChangeMessageCB","newMessage","onChangeMessage","likeCount","React","postElement","posts","reverse","map","el","post","id","MyPostForm","addPost","addPostCB","formik","useFormik","initialValues","newPostFormik","onSubmit","values","resetForm","validate","errors","length","handleSubmit","getFieldProps","type","btn","connect","state","profilePage","dispatch","AddPostAC","ChangeMessageAC","MyPost","ProfileInfo","lazy","Profile","Suspense","fallback","Preloader","isOwner","status","updateStatus","profile","savePhoto","saveProfile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getUsersProfile","getStatusProfile","refreshProfile","prevProps","prevState","snapshot","updateStatusProfile","isAuth","compose","getProfileReselect","getStatus","getIsAuthSelector","getAuthId","getUsersProfileThunkCreator","getStatusProfileThunkCreator","updateStatusProfileThunkCreator","savePhotoTC","saveProfileTC","withRouter"],"sourceRoot":""}